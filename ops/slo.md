# SLO

## 目的
本サービスの最低限の信頼性目標を定義し、障害時に「復旧を優先するか / 変更を進めるか」の判断材料を作る。

## 対象（Service）
- `GET /health`（可用性・基本レイテンシの代表）

## 前提
- ローカル環境では Prometheus が `/metrics` を scrape できる
- SLI は主に HTTP レスポンスコード / レイテンシから算出する

## SLI（何を測るか）
### 可用性
- 成功: 2xx
- 失敗: それ以外（3xx/4xx/5xx）

### レイテンシ
- p95（95パーセンタイル）

## SLO（どこまでを良しとするか）
### 可用性（rolling window）
- 99.9% / 30日

### レイテンシ（rolling window）
- p95 < 200ms / 30日（目安）

## Error Budget（考え方）
可用性 99.9% を 30日で見る場合：
- 失敗許容率: 0.1%
- 30日 ≒ 43,200分 → 許容ダウンタイムは 約 43.2 分 / 30日

## アラート（最小セット案）
意図：燃えやすい「瞬間値」ではなく、予算消費速度（burn rate）で考える。

- 可用性（高速検知）
  - 5分窓でエラー率が高い（例：> 5%）
- 可用性（SLO逸脱予兆）
  - 1時間窓でエラー率が継続（例：> 1%）

※ 正式な閾値はトラフィック/重要度に合わせて調整する前提

## 関連ドキュメント
- Runbook: [ops/runbook.md](runbook.md)
- Postmortem: [ops/postmortem.md](postmortem.md)
